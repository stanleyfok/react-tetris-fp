{"version":3,"sources":["tetris-bg.mp3","Tetris/components/Pixel/Pixel.js","Tetris/components/Grid/Grid.js","Tetris/types/Shapes/Shape.js","Tetris/types/Grid.js","Tetris/types/Shapes/SquareShape.js","Tetris/types/Shapes/BarShape.js","Tetris/types/Shapes/FlipLShape.js","Tetris/types/Shapes/LShape.js","Tetris/types/Shapes/SShape.js","Tetris/types/Shapes/TShape.js","Tetris/types/Shapes/ZShape.js","Tetris/types/Shapes/ShapeFactory.js","Tetris/types/GameState.js","Tetris/Tetris.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Pixel","props","classNames","isFilled","push","className","join","defaultProps","Grid","gridContent","grid","map","row","i","rowContent","col","j","key","Shape","TypeError","this","size","orientations","position","rotation","getShapeOrientation","shape","rows","cols","getEmptyMap","cloneGrid","newGrid","Array","fill","addShapeToGrid","orientation","forEach","_","actualX","actualY","SquareShape","BarShape","FlipLShape","LShape","SShape","TShape","ZShape","SHAPE_TYPES","SQUARE","T","S","Z","BAR","L","FLIP_L","getRandomShape","totalShapes","Object","keys","length","getShape","Math","floor","random","ACTION","MOVE_DOWN","MOVE_LEFT","MOVE_RIGHT","ROTATE","GameState","currentShape","unclearedGrid","isGameOver","cloneGameState","gameState","newGameState","newShape","constructor","name","cloneShape","getInitGameState","getNextShape","getShapeInitialPosition","getNextGameState","action","nextGameState","isCollided","hasCollision","filter","reduce","acc","value","clearFullRows","Tetris","handleKeyDown","e","keyCode","rotateShape","moveShapeLeft","moveShapeRight","moveShapeDown","startNewGame","normalInterval","setState","timer","setTimeout","doGameTick","alert","speedUpSpeed","isSpeedUp","state","document","addEventListener","removeEventListener","React","Component","App","src","tetrisBg","type","autoPlay","loop","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.98e7c165.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/tetris-bg.4ae866dc.mp3\";","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./Pixel.css\";\n\n// pure component ðŸŒŸ\nfunction Pixel(props) {\n  const { isFilled } = props;\n\n  const classNames = [\"pixel\"];\n  if (isFilled) {\n    classNames.push(\"pixel--filled\");\n  }\n\n  return <div className={classNames.join(\" \")}></div>;\n}\n\nPixel.propTypes = {\n  isFilled: PropTypes.bool\n};\n\nPixel.defaultProps = {\n  isFilled: false\n};\n\nexport default Pixel;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Pixel from \"../Pixel/Pixel\";\n\nimport \"./Grid.css\";\n\n// pure component ðŸŒŸ\nfunction Grid(props) {\n  const { map } = props.grid;\n\n  const gridContent = map.map((row, i) => {\n    const rowContent = row.map((col, j) => {\n      return <Pixel key={`pixel-${i},${j}`} isFilled={col} />;\n    });\n\n    return <div key={`row-${i}`}>{rowContent}</div>;\n  });\n\n  return <div className=\"grid\">{gridContent}</div>;\n}\n\nGrid.propTypes = {\n  grid: PropTypes.object.isRequired\n};\n\nexport default Grid;\n","export default class Shape {\n  constructor() {\n    if (new.target === Shape) {\n      throw new TypeError(\"Cannot construct Shape instances directly\");\n    }\n\n    // to be overidden\n    this.size = 0;\n    this.orientations = null;\n\n    // other properties\n    this.position = [0, 0];\n    this.rotation = 0;\n  }\n}\n\n// pure function ðŸŒŸ\nexport const getShapeOrientation = shape => {\n  return shape.orientations[shape.rotation];\n};\n","import { getShapeOrientation } from \"./Shapes/Shape\";\n\nexport default class Grid {\n  constructor(rows, cols) {\n    this.map = getEmptyMap(rows, cols);\n    this.rows = rows;\n    this.cols = cols;\n  }\n}\n\n// pure function ðŸŒŸ\nexport const cloneGrid = grid => {\n  const newGrid = new Grid(grid.rows, grid.cols);\n\n  newGrid.map = grid.map.map(row => [...row]);\n\n  return newGrid;\n};\n\nconst getEmptyMap = (rows, cols) => {\n  return new Array(rows).fill(new Array(cols).fill(false));\n};\n\n// pure function ðŸŒŸ\nexport const hasCollision = (shape, grid) => {\n  const orientation = getShapeOrientation(shape);\n\n  let isCollided = false;\n  orientation.forEach((row, i) => {\n    row.forEach((_, j) => {\n      // only check if the pixel on the shape is filled\n      if (orientation[i][j] === 1) {\n        const actualX = shape.position[0] + j;\n        const actualY = shape.position[1] + i;\n\n        // ignore if still above the top\n        if (actualY < 0) {\n          return;\n        }\n\n        // check if hitting the bottom wall\n        if (actualY >= grid.rows) {\n          isCollided = true;\n\n          return;\n        }\n\n        // check if hitting the left and right walls\n        if (actualX < 0 || actualX >= grid.cols) {\n          isCollided = true;\n\n          return;\n        }\n\n        // check if hitting an unclear pixel\n        if (grid.map[actualY][actualX] === true) {\n          isCollided = true;\n        }\n      }\n    });\n  });\n\n  return isCollided;\n};\n\n// pure function ðŸŒŸ\nexport const addShapeToGrid = (shape, grid) => {\n  const newGrid = cloneGrid(grid);\n  const orientation = getShapeOrientation(shape);\n\n  orientation.forEach((row, i) => {\n    row.forEach((_, j) => {\n      if (orientation[i][j] === 1) {\n        const actualX = shape.position[0] + j;\n        const actualY = shape.position[1] + i;\n\n        if (\n          actualX >= 0 &&\n          actualX < newGrid.cols &&\n          actualY >= 0 &&\n          actualY < newGrid.rows\n        ) {\n          newGrid.map[actualY][actualX] = true;\n        }\n      }\n    });\n  });\n\n  return newGrid;\n};\n\n// pure function ðŸŒŸ\nexport const clearFullRows = grid => {\n  const newGrid = cloneGrid(grid);\n\n  // filter full rows\n  newGrid.map = newGrid.map.filter(\n    row => !row.reduce((acc, value) => (acc &= value), true)\n  );\n\n  // append empty rows back\n  newGrid.map = [\n    ...getEmptyMap(newGrid.rows - newGrid.map.length, newGrid.cols),\n    ...newGrid.map\n  ];\n\n  return newGrid;\n};\n","import Shape from \"./Shape\";\n\nclass SquareShape extends Shape {\n  constructor() {\n    super();\n\n    this.size = 2;\n    this.orientations = [\n      [\n        [1, 1],\n        [1, 1]\n      ]\n    ];\n  }\n}\n\nexport default SquareShape;\n","import Shape from \"./Shape\";\n\nclass BarShape extends Shape {\n  constructor() {\n    super();\n\n    this.size = 4;\n    this.orientations = [\n      [\n        [0, 1, 0, 0],\n        [0, 1, 0, 0],\n        [0, 1, 0, 0],\n        [0, 1, 0, 0]\n      ],\n      [\n        [0, 0, 0, 0],\n        [1, 1, 1, 1],\n        [0, 0, 0, 0],\n        [0, 0, 0, 0]\n      ]\n    ];\n  }\n}\n\nexport default BarShape;\n","import Shape from \"./Shape\";\n\nclass FlipLShape extends Shape {\n  constructor() {\n    super();\n\n    this.size = 3;\n    this.orientations = [\n      [\n        [0, 0, 1],\n        [0, 0, 1],\n        [0, 1, 1]\n      ],\n      [\n        [1, 0, 0],\n        [1, 1, 1],\n        [0, 0, 0]\n      ],\n      [\n        [1, 1, 0],\n        [1, 0, 0],\n        [1, 0, 0]\n      ],\n      [\n        [1, 1, 1],\n        [0, 0, 1],\n        [0, 0, 0]\n      ]\n    ];\n  }\n}\n\nexport default FlipLShape;\n","import Shape from \"./Shape\";\n\nclass LShape extends Shape {\n  constructor() {\n    super();\n\n    this.size = 3;\n    this.orientations = [\n      [\n        [1, 0, 0],\n        [1, 0, 0],\n        [1, 1, 0]\n      ],\n      [\n        [0, 0, 1],\n        [1, 1, 1],\n        [0, 0, 0]\n      ],\n      [\n        [0, 1, 1],\n        [0, 0, 1],\n        [0, 0, 1]\n      ],\n      [\n        [1, 1, 1],\n        [1, 0, 0],\n        [0, 0, 0]\n      ]\n    ];\n  }\n}\n\nexport default LShape;\n","import Shape from \"./Shape\";\n\nclass SShape extends Shape {\n  constructor() {\n    super();\n\n    this.size = 3;\n    this.orientations = [\n      [\n        [0, 1, 1],\n        [1, 1, 0],\n        [0, 0, 0]\n      ],\n      [\n        [0, 1, 0],\n        [0, 1, 1],\n        [0, 0, 1]\n      ]\n    ];\n  }\n}\n\nexport default SShape;\n","import Shape from \"./Shape\";\n\nclass TShape extends Shape {\n  constructor() {\n    super();\n\n    this.size = 3;\n    this.orientations = [\n      [\n        [0, 1, 0],\n        [1, 1, 1],\n        [0, 0, 0]\n      ],\n      [\n        [0, 1, 0],\n        [0, 1, 1],\n        [0, 1, 0]\n      ],\n      [\n        [0, 0, 0],\n        [1, 1, 1],\n        [0, 1, 0]\n      ],\n      [\n        [0, 1, 0],\n        [1, 1, 0],\n        [0, 1, 0]\n      ]\n    ];\n  }\n}\n\nexport default TShape;\n","import Shape from \"./Shape\";\n\nclass ZShape extends Shape {\n  constructor() {\n    super();\n\n    this.size = 3;\n    this.orientations = [\n      [\n        [1, 1, 0],\n        [0, 1, 1],\n        [0, 0, 0]\n      ],\n      [\n        [0, 0, 1],\n        [0, 1, 1],\n        [0, 1, 0]\n      ]\n    ];\n  }\n}\n\nexport default ZShape;\n","import SquareShape from \"./SquareShape\";\nimport BarShape from \"./BarShape\";\nimport FlipLShape from \"./FlipLShape\";\nimport LShape from \"./LShape\";\nimport SShape from \"./SShape\";\nimport TShape from \"./TShape\";\nimport ZShape from \"./ZShape\";\n\nconst SHAPE_TYPES = {\n  SQUARE: 0,\n  T: 1,\n  S: 2,\n  Z: 3,\n  BAR: 4,\n  L: 5,\n  FLIP_L: 6\n};\n\n// pure function ðŸŒŸ\nexport const getShape = shape => {\n  switch (shape) {\n    case SHAPE_TYPES.SQUARE:\n      return new SquareShape();\n    case SHAPE_TYPES.T:\n      return new TShape();\n    case SHAPE_TYPES.S:\n      return new SShape();\n    case SHAPE_TYPES.Z:\n      return new ZShape();\n    case SHAPE_TYPES.BAR:\n      return new BarShape();\n    case SHAPE_TYPES.L:\n      return new LShape();\n    case SHAPE_TYPES.FLIP_L:\n      return new FlipLShape();\n    default:\n      return new BarShape();\n  }\n};\n\n// pure function ðŸŒŸ\nexport const cloneShape = shape => {\n  const shapeClass = shape.constructor.name;\n  let newShape;\n\n  switch (shapeClass) {\n    case \"SquareShape\":\n      newShape = new SquareShape();\n      break;\n    case \"TShape\":\n      newShape = new TShape();\n      break;\n    case \"SShape\":\n      newShape = new SShape();\n      break;\n    case \"ZShape\":\n      newShape = new ZShape();\n      break;\n    case \"BarShape\":\n      newShape = new BarShape();\n      break;\n    case \"LShape\":\n      newShape = new LShape();\n      break;\n    case \"FlipLShape\":\n      newShape = new FlipLShape();\n      break;\n    default:\n      newShape = new BarShape();\n      break;\n  }\n\n  newShape.position = [...shape.position];\n  newShape.rotation = shape.rotation;\n\n  return newShape;\n};\n\n// impure function due to randomness\nexport const getRandomShape = () => {\n  const totalShapes = Object.keys(SHAPE_TYPES).length;\n  const shape = Math.floor(Math.random() * totalShapes);\n\n  return getShape(shape);\n};\n","import { getRandomShape, cloneShape } from \"./Shapes/ShapeFactory\";\nimport Grid, {\n  cloneGrid,\n  hasCollision,\n  addShapeToGrid,\n  clearFullRows\n} from \"./Grid\";\nimport { getShapeOrientation } from \"./Shapes/Shape\";\n\nexport const ACTION = {\n  MOVE_DOWN: 0,\n  MOVE_LEFT: 1,\n  MOVE_RIGHT: 2,\n  ROTATE: 3\n};\n\nexport default class GameState {\n  constructor(rows, cols) {\n    this.currentShape = null;\n    this.unclearedGrid = new Grid(rows, cols);\n    this.isGameOver = false;\n  }\n}\n\n// pure function ðŸŒŸ\nexport const cloneGameState = gameState => {\n  const newGameState = new GameState();\n\n  newGameState.currentShape = cloneShape(gameState.currentShape);\n  newGameState.unclearedGrid = cloneGrid(gameState.unclearedGrid);\n  newGameState.isGameOver = gameState.isGameOver;\n\n  return newGameState;\n};\n\n// impure function due to randomness\nexport const getInitGameState = (rows, cols) => {\n  const gameState = new GameState(rows, cols);\n\n  gameState.currentShape = getNextShape(gameState.unclearedGrid);\n\n  return gameState;\n};\n\n// impure function due to randomness\n// since generating next shape is by random, it is not predictive\nconst getNextShape = Grid => {\n  const shape = getRandomShape();\n\n  shape.rotation = Math.floor(Math.random() * shape.orientations.length);\n  shape.position = getShapeInitialPosition(shape, Grid);\n\n  return shape;\n};\n\n// pure function\nconst getShapeInitialPosition = (shape, Grid) => {\n  return [\n    Math.floor((Grid.cols - shape.size) / 2), // middle of tower\n    -shape.size // top of tower\n  ];\n};\n\n// pure function ðŸŒŸ\nexport const getNextGameState = (action, gameState) => {\n  const nextGameState = cloneGameState(gameState);\n\n  switch (action) {\n    case ACTION.MOVE_DOWN:\n      nextGameState.currentShape.position[1] += 1;\n      break;\n    case ACTION.MOVE_LEFT:\n      nextGameState.currentShape.position[0] -= 1;\n      break;\n    case ACTION.MOVE_RIGHT:\n      nextGameState.currentShape.position[0] += 1;\n      break;\n    case ACTION.ROTATE:\n      nextGameState.currentShape.rotation =\n        (nextGameState.currentShape.rotation + 1) %\n        nextGameState.currentShape.orientations.length;\n      break;\n    default:\n      break;\n  }\n\n  const isCollided = hasCollision(\n    nextGameState.currentShape,\n    nextGameState.unclearedGrid\n  );\n\n  if (isCollided) {\n    if (action === ACTION.MOVE_DOWN) {\n      nextGameState.unclearedGrid = addShapeToGrid(\n        gameState.currentShape, // use old state's shape position\n        nextGameState.unclearedGrid\n      );\n\n      // clear full rows\n      nextGameState.unclearedGrid = clearFullRows(nextGameState.unclearedGrid);\n\n      // check if game over\n      if (nextGameState.currentShape.position[1] < 0) {\n        nextGameState.isGameOver = true;\n      } else {\n        nextGameState.currentShape = getNextShape(nextGameState.unclearedGrid);\n      }\n    } else {\n      // just cannot move the shape, so game state keeps unchanged\n      return gameState;\n    }\n  }\n\n  return nextGameState;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Grid from \"./components/Grid/Grid\";\nimport { addShapeToGrid } from \"./types/Grid\";\n\nimport { ACTION, getNextGameState, getInitGameState } from \"./types/GameState\";\n\nclass Tetris extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n  }\n\n  componentDidMount() {\n    // register events\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n\n    this.startNewGame();\n  }\n\n  componentWillUnmount() {\n    // deregister events\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    switch (e.keyCode) {\n      case 32: // SPACE\n      case 38: // UP\n        this.rotateShape();\n        break;\n      case 37: // LEFT\n        this.moveShapeLeft();\n        break;\n      case 39: // RIGHT\n        this.moveShapeRight();\n        break;\n      case 40: // DOWN\n        this.moveShapeDown();\n        break;\n      default:\n        break;\n    }\n  };\n\n  startNewGame = () => {\n    const { rows, cols, normalInterval } = this.props;\n    this.gameState = getInitGameState(rows, cols);\n\n    this.setState({\n      grid: addShapeToGrid(\n        this.gameState.currentShape,\n        this.gameState.unclearedGrid\n      )\n    });\n\n    this.timer = setTimeout(this.doGameTick, normalInterval);\n  };\n\n  doGameTick = () => {\n    if (!this.gameState.isGameOver) {\n      const { normalInterval, speedUpSpeed } = this.props;\n\n      this.moveShapeDown();\n\n      // do next tick\n      this.timer = setTimeout(\n        this.doGameTick,\n        normalInterval / (this.gameState.isSpeedUp ? speedUpSpeed : 1)\n      );\n    } else {\n      alert(\"Game Over!\");\n\n      this.startNewGame();\n    }\n  };\n\n  // impure function\n  moveShapeDown = () => {\n    this.gameState = getNextGameState(ACTION.MOVE_DOWN, this.gameState);\n\n    this.setState({\n      grid: addShapeToGrid(\n        this.gameState.currentShape,\n        this.gameState.unclearedGrid\n      )\n    });\n  };\n\n  // impure function\n  moveShapeLeft = () => {\n    this.gameState = getNextGameState(ACTION.MOVE_LEFT, this.gameState);\n\n    this.setState({\n      grid: addShapeToGrid(\n        this.gameState.currentShape,\n        this.gameState.unclearedGrid\n      )\n    });\n  };\n\n  // impure function\n  moveShapeRight = () => {\n    this.gameState = getNextGameState(ACTION.MOVE_RIGHT, this.gameState);\n\n    this.setState({\n      grid: addShapeToGrid(\n        this.gameState.currentShape,\n        this.gameState.unclearedGrid\n      )\n    });\n  };\n\n  // impure function\n  rotateShape = () => {\n    this.gameState = getNextGameState(ACTION.ROTATE, this.gameState);\n\n    this.setState({\n      grid: addShapeToGrid(\n        this.gameState.currentShape,\n        this.gameState.unclearedGrid\n      )\n    });\n  };\n\n  render() {\n    const { grid } = this.state;\n\n    return <div>{grid && <Grid grid={grid} />}</div>;\n  }\n}\n\nTetris.propTypes = {\n  rows: PropTypes.number.isRequired,\n  cols: PropTypes.number.isRequired,\n  normalInterval: PropTypes.number.isRequired,\n  speedUpSpeed: PropTypes.number.isRequired\n};\n\nTetris.defaultProps = {\n  rows: 20,\n  cols: 10,\n  normalInterval: 400,\n  speedUpSpeed: 5\n};\n\nexport default Tetris;\n","import React from \"react\";\nimport Tetris from \"./Tetris/Tetris\";\nimport tetrisBg from \"./tetris-bg.mp3\";\nimport \"./App.css\";\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <Tetris rows={20} cols={10} normalInterval={400} speedUpSpeed={8} />\n      <audio src={tetrisBg} type=\"audio/mpeg\" autoPlay={true} loop={true} />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}