(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/tetris-bg.4ae866dc.mp3"},function(e,t,n){e.exports=n(19)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8),o=n.n(i),c=(n(15),n(0)),s=n(5),u=n(3),l=n(2),h=n(4);n(16);function p(e){var t=["pixel"];return e.isFilled&&t.push("pixel--filled"),r.a.createElement("div",{className:t.join(" ")})}p.defaultProps={isFilled:!1};var m=p;n(17);var d=function(e){var t=e.grid.map.map((function(e,t){var n=e.map((function(e,n){return r.a.createElement(m,{key:"pixel-".concat(t,",").concat(n),isFilled:e})}));return r.a.createElement("div",{key:"row-".concat(t)},n)}));return r.a.createElement("div",{className:"grid"},t)},f=n(6),S=function e(){if(Object(c.a)(this,e),(this instanceof e?this.constructor:void 0)===e)throw new TypeError("Cannot construct Shape instances directly");this.size=0,this.orientations=null,this.position=[0,0],this.rotation=0},v=function(e){return e.orientations[e.rotation]},O=function(){function e(t,n){Object(c.a)(this,e),this.map=b(t,n),this.rows=t,this.cols=n}return Object(s.a)(e,[{key:"clone",value:function(){var t=new e(this.rows,this.cols);return t.map=this.map.map((function(e){return Object(f.a)(e)})),t}}]),e}(),b=function(e,t){return new Array(e).fill(new Array(t).fill(!1))},w=function(e,t){var n=t.clone(),a=v(e);return a.forEach((function(t,r){t.forEach((function(t,i){if(1===a[r][i]){var o=e.position[0]+i,c=e.position[1]+r;o>=0&&o<n.cols&&c>=0&&c<n.rows&&(n.map[c][o]=!0)}}))})),n},j=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=2,e.orientations=[[[1,1],[1,1]]],e}return Object(h.a)(t,e),t}(S),g=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=4,e.orientations=[[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]],e}return Object(h.a)(t,e),t}(S),E=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[0,0,1],[0,0,1],[0,1,1]],[[1,0,0],[1,1,1],[0,0,0]],[[1,1,0],[1,0,0],[1,0,0]],[[1,1,1],[0,0,1],[0,0,0]]],e}return Object(h.a)(t,e),t}(S),k=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[1,0,0],[1,0,0],[1,1,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,1],[0,0,1],[0,0,1]],[[1,1,1],[1,0,0],[0,0,0]]],e}return Object(h.a)(t,e),t}(S),G=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]],e}return Object(h.a)(t,e),t}(S),y=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],e}return Object(h.a)(t,e),t}(S),T=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]],e}return Object(h.a)(t,e),t}(S),M={SQUARE:0,T:1,S:2,Z:3,BAR:4,L:5,FLIP_L:6},L=function(){var e=Object.keys(M).length;return function(e){switch(e){case M.SQUARE:return new j;case M.T:return new y;case M.S:return new G;case M.Z:return new T;case M.BAR:return new g;case M.L:return new k;case M.FLIP_L:return new E;default:return new g}}(Math.floor(Math.random()*e))},R={MOVE_DOWN:0,MOVE_LEFT:1,MOVE_RIGHT:2,ROTATE:3},_=function(){function e(t,n){Object(c.a)(this,e),this.currentShape=null,this.unclearedGrid=new O(t,n),this.isGameOver=!1}return Object(s.a)(e,[{key:"clone",value:function(){var t=new e;return t.currentShape=function(e){var t;switch(e.constructor.name){case"SquareShape":t=new j;break;case"TShape":t=new y;break;case"SShape":t=new G;break;case"ZShape":t=new T;break;case"BarShape":t=new g;break;case"LShape":t=new k;break;case"FlipLShape":t=new E;break;default:t=new g}return t.position=Object(f.a)(e.position),t.rotation=e.rotation,t}(this.currentShape),t.unclearedGrid=this.unclearedGrid.clone(),t.isGameOver=this.isGameOver,t}}]),e}(),D=function(e,t){var n=new _(e,t);return n.currentShape=z(n.unclearedGrid),n},z=function(e){var t=L();return t.rotation=Math.floor(Math.random()*t.orientations.length),t.position=I(t,e),t},I=function(e,t){return[Math.floor((t.cols-e.size)/2),-e.size]},N=function(e,t){var n=t.clone();switch(e){case R.MOVE_DOWN:n.currentShape.position[1]+=1;break;case R.MOVE_LEFT:n.currentShape.position[0]-=1;break;case R.MOVE_RIGHT:n.currentShape.position[0]+=1;break;case R.ROTATE:n.currentShape.rotation=(n.currentShape.rotation+1)%n.currentShape.orientations.length}if(function(e,t){var n=v(e),a=!1;return n.forEach((function(r,i){r.forEach((function(r,o){if(1===n[i][o]){var c=e.position[0]+o,s=e.position[1]+i;if(s<0)return;if(s>=t.rows)return void(a=!0);if(c<0||c>=t.cols)return void(a=!0);!0===t.map[s][c]&&(a=!0)}}))})),a}(n.currentShape,n.unclearedGrid)){if(e!==R.MOVE_DOWN)return t;n.unclearedGrid=w(t.currentShape,n.unclearedGrid),n.unclearedGrid=function(e){var t=e.clone();return t.map=t.map.filter((function(e){return!e.reduce((function(e,t){return e&t}),!0)})),t.map=[].concat(Object(f.a)(b(t.rows-t.map.length,t.cols)),Object(f.a)(t.map)),t}(n.unclearedGrid),n.currentShape.position[1]<0?n.isGameOver=!0:n.currentShape=z(n.unclearedGrid)}return n},V=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleKeyDown=function(e){switch(e.keyCode){case 32:case 38:n.rotateShape();break;case 37:n.moveShapeLeft();break;case 39:n.moveShapeRight();break;case 40:n.moveShapeDown()}},n.startNewGame=function(){var e=n.props,t=e.rows,a=e.cols,r=e.normalInterval;n.gameState=D(t,a),n.setState({grid:w(n.gameState.currentShape,n.gameState.unclearedGrid)}),n.timer=setTimeout(n.doGameTick,r)},n.doGameTick=function(){if(n.gameState.isGameOver)alert("Game Over!"),n.startNewGame();else{var e=n.props,t=e.normalInterval,a=e.speedUpSpeed;n.moveShapeDown(),n.timer=setTimeout(n.doGameTick,t/(n.gameState.isSpeedUp?a:1))}},n.moveShapeDown=function(){n.gameState=N(R.MOVE_DOWN,n.gameState),n.setState({grid:w(n.gameState.currentShape,n.gameState.unclearedGrid)})},n.moveShapeLeft=function(){n.gameState=N(R.MOVE_LEFT,n.gameState),n.setState({grid:w(n.gameState.currentShape,n.gameState.unclearedGrid)})},n.moveShapeRight=function(){n.gameState=N(R.MOVE_RIGHT,n.gameState),n.setState({grid:w(n.gameState.currentShape,n.gameState.unclearedGrid)})},n.rotateShape=function(){n.gameState=N(R.ROTATE,n.gameState),n.setState({grid:w(n.gameState.currentShape,n.gameState.unclearedGrid)})},n.state={},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.startNewGame()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.state.grid;return r.a.createElement("div",null,e&&r.a.createElement(d,{grid:e}))}}]),t}(r.a.Component);V.defaultProps={rows:20,cols:10,normalInterval:400,speedUpSpeed:5};var A=V,F=n(9),U=n.n(F);n(18);var W=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(A,{rows:20,cols:10,normalInterval:400,speedUpSpeed:8}),r.a.createElement("audio",{src:U.a,type:"audio/mpeg",autoPlay:!0,loop:!0}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[10,1,2]]]);
//# sourceMappingURL=main.fc917dfe.chunk.js.map