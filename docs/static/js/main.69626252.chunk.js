(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/tetris-bg.4ae866dc.mp3"},12:function(e,t,n){e.exports=n(27)},17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(9),o=n.n(i),c=(n(17),n(0)),s=n(10),u=n(3),l=n(2),p=n(4);n(18);function f(e){var t=["pixel"];return e.isFilled&&t.push("pixel--filled"),a.a.createElement("div",{className:t.join(" ")})}f.defaultProps={isFilled:!1};var h=f;n(19);var O=function(e){var t=e.grid.map.map((function(e,t){var n=e.map((function(e,n){return a.a.createElement(h,{key:"pixel-".concat(t,",").concat(n),isFilled:e})}));return a.a.createElement("div",{key:"row-".concat(t)},n)}));return a.a.createElement("div",{className:"grid"},t)},m=n(7),b=n(5),d=n(6),v=function e(){if(Object(c.a)(this,e),(this instanceof e?this.constructor:void 0)===e)throw new TypeError("Cannot construct Shape instances directly");this.size=0,this.orientations=null,this.position=[0,0],this.rotation=0},j=function(e){return e.orientations[e.rotation]},S=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=2,e.orientations=[[[1,1],[1,1]]],e}return Object(p.a)(t,e),t}(v),w=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=4,e.orientations=[[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]],e}return Object(p.a)(t,e),t}(v),y=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[0,0,1],[0,0,1],[0,1,1]],[[1,0,0],[1,1,1],[0,0,0]],[[1,1,0],[1,0,0],[1,0,0]],[[1,1,1],[0,0,1],[0,0,0]]],e}return Object(p.a)(t,e),t}(v),g=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[1,0,0],[1,0,0],[1,1,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,1],[0,0,1],[0,0,1]],[[1,1,1],[1,0,0],[0,0,0]]],e}return Object(p.a)(t,e),t}(v),E=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]],e}return Object(p.a)(t,e),t}(v),k=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],e}return Object(p.a)(t,e),t}(v),G=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]],e}return Object(p.a)(t,e),t}(v),P={SQUARE:0,T:1,S:2,Z:3,BAR:4,L:5,FLIP_L:6},T=function(e){var t;switch(e.constructor.name){case"SquareShape":t=new S;break;case"TShape":t=new k;break;case"SShape":t=new E;break;case"ZShape":t=new G;break;case"BarShape":t=new w;break;case"LShape":t=new g;break;case"FlipLShape":t=new y;break;default:t=new w}return t.position=Object(d.a)(e.position),t.rotation=e.rotation,t},D=function(){var e=Object.keys(P).length;return function(e){switch(e){case P.SQUARE:return new S;case P.T:return new k;case P.S:return new E;case P.Z:return new G;case P.BAR:return new w;case P.L:return new g;case P.FLIP_L:return new y;default:return new w}}(Math.floor(Math.random()*e))};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var L=function(e,t){return{map:_(e,t),rows:e,cols:t}},R=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{map:e.map.map((function(e){return Object(d.a)(e)}))})},_=function(e,t){return Array(e).fill(new Array(t).fill(!1))},z=function(e,t){var n=R(t),r=j(e);return r.forEach((function(t,a){t.forEach((function(t,i){if(1===r[a][i]){var o=e.position[0]+i,c=e.position[1]+a;o>=0&&o<n.cols&&c>=0&&c<n.rows&&(n.map[c][o]=!0)}}))})),n},I=function(e){var t=R(e);return t.map=Object(b.flow)(N,Object(b.curry)(V)(e.rows)(e.cols))(e.map),t},N=function(e){return e.filter((function(e){return!e.reduce((function(e,t){return e&t}),!0)}))},V=function(e,t,n){return[].concat(Object(d.a)(_(e-n.length,t)),Object(d.a)(n))};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var F={MOVE_DOWN:0,MOVE_LEFT:1,MOVE_RIGHT:2,ROTATE:3},U=function(e,t){return{currentShape:x(t),unclearedGrid:L(e,t),displayGrid:L(e,t),isGameOver:!1}},W=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{currentShape:T(e.currentShape),unclearedGrid:R(e.unclearedGrid),displayGrid:R(e.displayGrid)})},x=function(e){var t=D();return t.rotation=Math.floor(Math.random()*t.orientations.length),t.position=B(t,e),t},B=function(e,t){return[Math.floor((t-e.size)/2),-e.size]},C=function(e,t){var n=W(t);switch(e){case F.MOVE_DOWN:n.currentShape.position[1]+=1;break;case F.MOVE_LEFT:n.currentShape.position[0]-=1;break;case F.MOVE_RIGHT:n.currentShape.position[0]+=1;break;case F.ROTATE:n.currentShape.rotation=(n.currentShape.rotation+1)%n.currentShape.orientations.length}if(function(e,t){var n=j(e),r=!1;return n.forEach((function(a,i){a.forEach((function(a,o){if(1===n[i][o]){var c=e.position[0]+o,s=e.position[1]+i;if(s<0)return;if(s>=t.rows)return void(r=!0);if(c<0||c>=t.cols)return void(r=!0);!0===t.map[s][c]&&(r=!0)}}))})),r}(n.currentShape,n.unclearedGrid)){if(e!==F.MOVE_DOWN)return t;n.unclearedGrid=Object(b.flow)(Object(b.curry)(z)(t.currentShape),I)(n.unclearedGrid),n.currentShape.position[1]<0?n.isGameOver=!0:n.currentShape=x(n.unclearedGrid.cols)}return n.displayGrid=z(n.currentShape,n.unclearedGrid),n},H=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleKeyDown=function(e){switch(e.keyCode){case 32:case 38:n.rotateShape();break;case 37:n.moveShapeLeft();break;case 39:n.moveShapeRight();break;case 40:n.moveShapeDown()}},n.startNewGame=function(){var e=n.props,t=e.rows,r=e.cols,a=e.normalInterval;n.gameState=U(t,r),n.setState(n.gameState),n.timer=setTimeout(n.doGameTick,a)},n.doGameTick=function(){if(n.gameState.isGameOver)alert("Game Over!"),n.startNewGame();else{var e=n.props,t=e.normalInterval,r=e.speedUpSpeed;n.moveShapeDown(),n.timer=setTimeout(n.doGameTick,t/(n.gameState.isSpeedUp?r:1))}},n.moveShapeDown=function(){n.gameState=C(F.MOVE_DOWN,n.gameState),n.setState(n.gameState)},n.moveShapeLeft=function(){n.gameState=C(F.MOVE_LEFT,n.gameState),n.setState(n.gameState)},n.moveShapeRight=function(){n.gameState=C(F.MOVE_RIGHT,n.gameState),n.setState(n.gameState)},n.rotateShape=function(){n.gameState=C(F.ROTATE,n.gameState),n.setState(n.gameState)},n.state={},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.startNewGame()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.state.displayGrid;return a.a.createElement("div",null,e&&a.a.createElement(O,{grid:e}))}}]),t}(a.a.Component);H.defaultProps={rows:20,cols:10,normalInterval:400,speedUpSpeed:5};var K=H,Z=n(11),J=n.n(Z);n(26);var Q=function(){return a.a.createElement("div",{className:"app"},a.a.createElement(K,{rows:20,cols:10,normalInterval:400,speedUpSpeed:8}),a.a.createElement("audio",{src:J.a,type:"audio/mpeg",autoPlay:!0,loop:!0}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[12,1,2]]]);
//# sourceMappingURL=main.69626252.chunk.js.map