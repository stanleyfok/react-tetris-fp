(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/tetris-bg.4ae866dc.mp3"},function(e,t,n){e.exports=n(19)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(7),o=n.n(i),c=(n(15),n(0)),s=n(8),u=n(3),l=n(2),h=n(4);n(16);function p(e){var t=["pixel"];return e.isFilled&&t.push("pixel--filled"),r.a.createElement("div",{className:t.join(" ")})}p.defaultProps={isFilled:!1};var m=p;n(17);var d=function(e){var t=e.grid.map.map((function(e,t){var n=e.map((function(e,n){return r.a.createElement(m,{key:"pixel-".concat(t,",").concat(n),isFilled:e})}));return r.a.createElement("div",{key:"row-".concat(t)},n)}));return r.a.createElement("div",{className:"grid"},t)},f=n(5),S=function e(){if(Object(c.a)(this,e),(this instanceof e?this.constructor:void 0)===e)throw new TypeError("Cannot construct Shape instances directly");this.size=0,this.orientations=null,this.position=[0,0],this.rotation=0},v=function(e){return e.orientations[e.rotation]},O=function e(t,n){Object(c.a)(this,e),this.map=w(t,n),this.rows=t,this.cols=n},b=function(e){var t=new O(e.rows,e.cols);return t.map=e.map.map((function(e){return Object(f.a)(e)})),t},w=function(e,t){return new Array(e).fill(new Array(t).fill(!1))},g=function(e,t){var n=b(t),a=v(e);return a.forEach((function(t,r){t.forEach((function(t,i){if(1===a[r][i]){var o=e.position[0]+i,c=e.position[1]+r;o>=0&&o<n.cols&&c>=0&&c<n.rows&&(n.map[c][o]=!0)}}))})),n},j=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=2,e.orientations=[[[1,1],[1,1]]],e}return Object(h.a)(t,e),t}(S),E=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=4,e.orientations=[[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]],e}return Object(h.a)(t,e),t}(S),G=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[0,0,1],[0,0,1],[0,1,1]],[[1,0,0],[1,1,1],[0,0,0]],[[1,1,0],[1,0,0],[1,0,0]],[[1,1,1],[0,0,1],[0,0,0]]],e}return Object(h.a)(t,e),t}(S),k=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[1,0,0],[1,0,0],[1,1,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,1],[0,0,1],[0,0,1]],[[1,1,1],[1,0,0],[0,0,0]]],e}return Object(h.a)(t,e),t}(S),T=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]],e}return Object(h.a)(t,e),t}(S),y=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],e}return Object(h.a)(t,e),t}(S),M=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).size=3,e.orientations=[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]],e}return Object(h.a)(t,e),t}(S),L={SQUARE:0,T:1,S:2,Z:3,BAR:4,L:5,FLIP_L:6},R=function(){var e=Object.keys(L).length;return function(e){switch(e){case L.SQUARE:return new j;case L.T:return new y;case L.S:return new T;case L.Z:return new M;case L.BAR:return new E;case L.L:return new k;case L.FLIP_L:return new G;default:return new E}}(Math.floor(Math.random()*e))},_={MOVE_DOWN:0,MOVE_LEFT:1,MOVE_RIGHT:2,ROTATE:3},D=function e(t,n){Object(c.a)(this,e),this.currentShape=null,this.unclearedGrid=new O(t,n),this.isGameOver=!1},z=function(e){var t=new D;return t.currentShape=function(e){var t;switch(e.constructor.name){case"SquareShape":t=new j;break;case"TShape":t=new y;break;case"SShape":t=new T;break;case"ZShape":t=new M;break;case"BarShape":t=new E;break;case"LShape":t=new k;break;case"FlipLShape":t=new G;break;default:t=new E}return t.position=Object(f.a)(e.position),t.rotation=e.rotation,t}(e.currentShape),t.unclearedGrid=b(e.unclearedGrid),t.isGameOver=e.isGameOver,t},I=function(e,t){var n=new D(e,t);return n.currentShape=N(n.unclearedGrid),n},N=function(e){var t=R();return t.rotation=Math.floor(Math.random()*t.orientations.length),t.position=V(t,e),t},V=function(e,t){return[Math.floor((t.cols-e.size)/2),-e.size]},A=function(e,t){var n=z(t);switch(e){case _.MOVE_DOWN:n.currentShape.position[1]+=1;break;case _.MOVE_LEFT:n.currentShape.position[0]-=1;break;case _.MOVE_RIGHT:n.currentShape.position[0]+=1;break;case _.ROTATE:n.currentShape.rotation=(n.currentShape.rotation+1)%n.currentShape.orientations.length}if(function(e,t){var n=v(e),a=!1;return n.forEach((function(r,i){r.forEach((function(r,o){if(1===n[i][o]){var c=e.position[0]+o,s=e.position[1]+i;if(s<0)return;if(s>=t.rows)return void(a=!0);if(c<0||c>=t.cols)return void(a=!0);!0===t.map[s][c]&&(a=!0)}}))})),a}(n.currentShape,n.unclearedGrid)){if(e!==_.MOVE_DOWN)return t;n.unclearedGrid=g(t.currentShape,n.unclearedGrid),n.unclearedGrid=function(e){var t=b(e);return t.map=t.map.filter((function(e){return!e.reduce((function(e,t){return e&t}),!0)})),t.map=[].concat(Object(f.a)(w(t.rows-t.map.length,t.cols)),Object(f.a)(t.map)),t}(n.unclearedGrid),n.currentShape.position[1]<0?n.isGameOver=!0:n.currentShape=N(n.unclearedGrid)}return n},F=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleKeyDown=function(e){switch(e.keyCode){case 32:case 38:n.rotateShape();break;case 37:n.moveShapeLeft();break;case 39:n.moveShapeRight();break;case 40:n.moveShapeDown()}},n.startNewGame=function(){var e=n.props,t=e.rows,a=e.cols,r=e.normalInterval;n.gameState=I(t,a),n.setState({grid:g(n.gameState.currentShape,n.gameState.unclearedGrid)}),n.timer=setTimeout(n.doGameTick,r)},n.doGameTick=function(){if(n.gameState.isGameOver)alert("Game Over!"),n.startNewGame();else{var e=n.props,t=e.normalInterval,a=e.speedUpSpeed;n.moveShapeDown(),n.timer=setTimeout(n.doGameTick,t/(n.gameState.isSpeedUp?a:1))}},n.moveShapeDown=function(){n.gameState=A(_.MOVE_DOWN,n.gameState),n.setState({grid:g(n.gameState.currentShape,n.gameState.unclearedGrid)})},n.moveShapeLeft=function(){n.gameState=A(_.MOVE_LEFT,n.gameState),n.setState({grid:g(n.gameState.currentShape,n.gameState.unclearedGrid)})},n.moveShapeRight=function(){n.gameState=A(_.MOVE_RIGHT,n.gameState),n.setState({grid:g(n.gameState.currentShape,n.gameState.unclearedGrid)})},n.rotateShape=function(){n.gameState=A(_.ROTATE,n.gameState),n.setState({grid:g(n.gameState.currentShape,n.gameState.unclearedGrid)})},n.state={},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.startNewGame()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.state.grid;return r.a.createElement("div",null,e&&r.a.createElement(d,{grid:e}))}}]),t}(r.a.Component);F.defaultProps={rows:20,cols:10,normalInterval:400,speedUpSpeed:5};var U=F,W=n(9),x=n.n(W);n(18);var B=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(U,{rows:20,cols:10,normalInterval:400,speedUpSpeed:8}),r.a.createElement("audio",{src:x.a,type:"audio/mpeg",autoPlay:!0,loop:!0}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[10,1,2]]]);
//# sourceMappingURL=main.98e7c165.chunk.js.map