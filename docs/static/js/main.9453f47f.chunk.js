(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{12:function(e,t,n){e.exports=n(27)},17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(5),i=n.n(a),c=(n(17),n(6)),s=n(7),u=n(10),l=n(8),p=n(11);n(18);function f(e){var t=["pixel"];return e.isFilled&&t.push("pixel--filled"),o.a.createElement("div",{className:t.join(" ")})}f.defaultProps={isFilled:!1};var m=f;n(19);var O=function(e){var t=e.grid.map.map((function(e,t){var n=e.map((function(e,n){return o.a.createElement(m,{key:"pixel-".concat(t,",").concat(n),isFilled:e})}));return o.a.createElement("div",{key:"row-".concat(t)},n)}));return o.a.createElement("div",{className:"grid"},t)},d=n(1),h=n(2);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={SQUARE:0,T:1,S:2,Z:3,BAR:4,L:5,FLIP_L:6},y=function(){var e=Object.keys(g).length;return function(e){switch(e){case g.SQUARE:return{size:2,orientations:[[[1,1],[1,1]]],position:[0,0],rotation:0};case g.T:return{size:3,orientations:[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],position:[0,0],rotation:0};case g.S:return{size:3,orientations:[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]],position:[0,0],rotation:0};case g.Z:return{size:3,orientations:[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]],position:[0,0],rotation:0};case g.BAR:return{size:4,orientations:[[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]],position:[0,0],rotation:0};case g.L:return{size:3,orientations:[[[1,0,0],[1,0,0],[1,1,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,1],[0,0,1],[0,0,1]],[[1,1,1],[1,0,0],[0,0,0]]],position:[0,0],rotation:0};case g.FLIP_L:return{size:3,orientations:[[[0,0,1],[0,0,1],[0,1,1]],[[1,0,0],[1,1,1],[0,0,0]],[[1,1,0],[1,0,0],[1,0,0]],[[1,1,1],[0,0,1],[0,0,0]]],position:[0,0],rotation:0};default:return{size:4,orientations:[[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]],position:[0,0],rotation:0}}}(Math.floor(Math.random()*e))},w=function(e){return e.orientations[e.rotation]},j=function(e,t){return b({},e,{position:[e.position[0]+t[0],e.position[1]+t[1]]})},E=n(3);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e,t){return{map:P(e,t),rows:e,cols:t}},P=function(e,t){return Array(e).fill(new Array(t).fill(!1))},G=function(e,t){var n=w(e);return k({},t,{map:t.map.map((function(t,r){return t.map((function(t,o){var a=o-e.position[0],i=r-e.position[1];return a>=0&&a<e.size&&i>=0&&i<e.size&&1===n[i][a]||t}))}))})},T=function(e){return k({},e,{map:Object(d.flow)(M,Object(d.curry)(L)(e.rows)(e.cols))(e.map)})},M=function(e){return e.filter((function(e){return!e.reduce((function(e,t){return e&t}),!0)}))},L=function(e,t,n){return[].concat(Object(E.a)(P(e-n.length,t)),Object(E.a)(n))},z={MOVE_DOWN:0,MOVE_LEFT:1,MOVE_RIGHT:2,ROTATE:3},R=function(e,t){return{shape:_(t),unclearedGrid:D(e,t),displayGrid:D(e,t),isGameOver:!1}},_=function(e){var t=y();return t.rotation=Math.floor(Math.random()*t.orientations.length),t.position=[Math.floor((e-t.size)/2),-t.size],t},I=function(e,t){var n,r,o=!1;switch(e){case z.MOVE_DOWN:n=j(t.shape,[0,1]);break;case z.MOVE_LEFT:n=j(t.shape,[-1,0]);break;case z.MOVE_RIGHT:n=j(t.shape,[1,0]);break;case z.ROTATE:n=function(e){return b({},e,{rotation:(e.rotation+1)%e.orientations.length})}(t.shape);break;default:n=j(t.shape,[0,1])}if(function(e,t){return w(e).reduce((function(n,r,o){return r.reduce((function(n,r,a){if(1===r){var i=e.position[0]+a,c=e.position[1]+o;if(c<0)return n;if(c>=t.rows)return!0;if(i<0||i>=t.cols)return!0;if(!0===t.map[c][i])return!0}return n}),n)}),!1)}(n,t.unclearedGrid)){if(e!==z.MOVE_DOWN)return Object(d.cloneDeep)(t);r=Object(d.flow)(Object(d.curry)(G)(t.shape),T)(t.unclearedGrid),n.position[1]<0?(o=!0,n=Object(d.cloneDeep)(t.shape)):n=_(r.cols)}else r=Object(d.cloneDeep)(t.unclearedGrid);return{shape:n,unclearedGrid:r,displayGrid:G(n,r),isGameOver:o}},N=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleKeyDown=function(e){switch(e.keyCode){case 32:case 38:n.rotateShape();break;case 37:n.moveShapeLeft();break;case 39:n.moveShapeRight();break;case 40:n.moveShapeDown()}},n.startNewGame=function(){var e=n.props,t=e.rows,r=e.cols,o=e.tickInterval;n.gameState=R(t,r),n.setState(n.gameState),n.timer=setTimeout(n.doGameTick,o)},n.doGameTick=function(){if(n.gameState.isGameOver)alert("Game Over!"),n.startNewGame();else{var e=n.props.tickInterval;n.moveShapeDown(),n.timer=setTimeout(n.doGameTick,e)}},n.moveShapeDown=function(){n.gameState=I(z.MOVE_DOWN,n.gameState),n.setState(n.gameState)},n.moveShapeLeft=function(){n.gameState=I(z.MOVE_LEFT,n.gameState),n.setState(n.gameState)},n.moveShapeRight=function(){n.gameState=I(z.MOVE_RIGHT,n.gameState),n.setState(n.gameState)},n.rotateShape=function(){n.gameState=I(z.ROTATE,n.gameState),n.setState(n.gameState)},n.state={},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.startNewGame()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.state.displayGrid;return o.a.createElement("div",null,e&&o.a.createElement(O,{grid:e}))}}]),t}(o.a.Component);N.defaultProps={rows:20,cols:10,tickInterval:400};var V=N,A=n(9),F=n.n(A);n(26);var W=function(){return o.a.createElement("div",{className:"app"},o.a.createElement("p",null,"Tetris using ",o.a.createElement("strong",null,"Functional Programming")," approach"),o.a.createElement(V,{rows:20,cols:10,normalInterval:400}),o.a.createElement("audio",{src:F.a,type:"audio/mpeg",autoPlay:!0,loop:!0}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,n){e.exports=n.p+"static/media/tetris-bg.4ae866dc.mp3"}},[[12,1,2]]]);
//# sourceMappingURL=main.9453f47f.chunk.js.map